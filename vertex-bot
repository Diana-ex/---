import vk_api
from vk_api.bot_longpoll import VkBotLongPoll, VkBotEventType
from vk_api.keyboard import VkKeyboard, VkKeyboardColor

# === –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ===
GROUP_TOKEN = 'vk1.a.oRBjcOGyGgr93acUfckI4elhb8v5cVsRrm_AY0mGXen9W4gA88jUWzqAyXX6jD9Ialq8yvsSZekc3GJpAiK3SaAmTeIw2DOIG-LOyj8Dzhi6ThFlYv1W4LGudWcQNwEwQH_HVS5aTRyhcAKDf7q5Q9EVfClJxmvxL3rSicq9AXLawnP48cxnzVwqElgHNVyz454ltCwFOgxSpf4CTwu--A'  # ‚Üê –∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π —Ç–æ–∫–µ–Ω –∏–∑ –í–ö

# === –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ===
vk_session = vk_api.VkApi(token=GROUP_TOKEN)
vk = vk_session.get_api()

# –ü–æ–ª—É—á–µ–Ω–∏–µ ID –≥—Ä—É–ø–ø—ã
group_id = vk.groups.getById(
    group_ids='226105127')[0]['id']  # –ó–∞–º–µ–Ω–∏ –Ω–∞ ID —Å–≤–æ–µ–π –≥—Ä—É–ø–ø—ã

print(f"–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã: {group_id}")

# –°–æ–∑–¥–∞–Ω–∏–µ Long Poll
longpoll = VkBotLongPoll(vk_session, group_id)

print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!")

# === –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ ===
faq = {
    "–ø—Ä–∏–≤–µ—Ç":
    "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –ø–æ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ –≤—Ç–æ—Ä—Å—ã—Ä—å—è. –í—ã–±–µ—Ä–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é —Ç–µ–º—É:",
    "—á—Ç–æ —Ç–∞–∫–æ–µ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞?":
    "–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤,"
    " —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –∏–∑ –Ω–∏—Ö –Ω–æ–≤—ã–µ –∏–∑–¥–µ–ª–∏—è. –¢–∞–∫ –º—ã —ç–∫–æ–Ω–æ–º–∏–º –ø—Ä–∏—Ä–æ–¥–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –∏ —É–º–µ–Ω—å—à–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ö–æ–¥–æ–≤.",
    "–≤–∏–¥—ã –≤—Ç–æ—Ä—Å—ã—Ä—å—è":
    "–û—Å–Ω–æ–≤–Ω—ã–µ –≤–∏–¥—ã –≤—Ç–æ—Ä—Å—ã—Ä—å—è:\n"
    "- –ë—É–º–∞–≥–∞ –∏ –∫–∞—Ä—Ç–æ–Ω\n"
    "- –ü–ª–∞—Å—Ç–∏–∫\n"
    "- –°—Ç–µ–∫–ª–æ\n"
    "- –ú–µ—Ç–∞–ª–ª\n"
    "- –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞\n"
    "- –¢–µ–∫—Å—Ç–∏–ª—å\n"
    "- –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–µ –æ—Ç—Ö–æ–¥—ã",
    "–∫–∞–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º—É—Å–æ—Ä?":
    "–°–æ—Ä—Ç–∏—Ä—É–π –º—É—Å–æ—Ä —Ç–∞–∫:\n"
    "üü¶ –°–∏–Ω–∏–π ‚Äî –±—É–º–∞–≥–∞\n"
    "üü© –ó–µ–ª—ë–Ω—ã–π ‚Äî —Å—Ç–µ–∫–ª–æ\n"
    "üü® –ñ—ë–ª—Ç—ã–π ‚Äî –ø–ª–∞—Å—Ç–∏–∫\n"
    "üü• –ö—Ä–∞—Å–Ω—ã–π ‚Äî –æ–ø–∞—Å–Ω—ã–µ –æ—Ç—Ö–æ–¥—ã\n"
    "‚ö™ –°–µ—Ä—ã–π ‚Äî —Å–º–µ—à–∞–Ω–Ω—ã–µ –æ—Ç—Ö–æ–¥—ã (–Ω–µ –ø–æ–¥–ª–µ–∂–∏—Ç –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–µ)",
    "–ø–æ–ª—å–∑–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏":
    "–ü–æ–ª—å–∑–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏:\n"
    "- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º—É—Å–æ—Ä–∞ –Ω–∞ —Å–≤–∞–ª–∫–∞—Ö\n"
    "- –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è –≤–æ–∑–¥—É—Ö–∞ –∏ –≤–æ–¥—ã\n"
    "- –≠–∫–æ–Ω–æ–º–∏—è —ç–Ω–µ—Ä–≥–∏–∏ –∏ –ø—Ä–∏—Ä–æ–¥–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤\n"
    "- –ó–∞—â–∏—Ç–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏ —Å—Ä–µ–¥—ã –æ–±–∏—Ç–∞–Ω–∏—è",
    "–∫—É–¥–∞ —Å–¥–∞–≤–∞—Ç—å –º—É—Å–æ—Ä?":
    "–ú–æ–∂–Ω–æ —Å–¥–∞—Ç—å –≤—Ç–æ—Ä—Å—ã—Ä—å—ë:\n"
    "- –í —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª—å–Ω–æ–≥–æ —Å–±–æ—Ä–∞\n"
    "- –í –ø—É–Ω–∫—Ç—ã –ø—Ä–∏—ë–º–∞ –≤—Ç–æ—Ä—Å—ã—Ä—å—è\n"
    "- –í —ç–∫–æ–ø—É–Ω–∫—Ç—ã –∏–ª–∏ —Ü–µ–Ω—Ç—Ä—ã –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏\n"
    "- –ß–µ—Ä–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ —Å–±–æ—Ä—É —Å—Ç–∞—Ä–æ–π —Ç–µ—Ö–Ω–∏–∫–∏ –∏–ª–∏ –æ–¥–µ–∂–¥—ã"
}


# === –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ===
def create_keyboard():
    keyboard = VkKeyboard(
        one_time=False)  # one_time=False ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è

    keyboard.add_button('–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞?',
                        color=VkKeyboardColor.PRIMARY)
    keyboard.add_line()  # –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É

    keyboard.add_button('–í–∏–¥—ã –≤—Ç–æ—Ä—Å—ã—Ä—å—è', color=VkKeyboardColor.SECONDARY)
    keyboard.add_button('–ö–∞–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º—É—Å–æ—Ä?',
                        color=VkKeyboardColor.SECONDARY)
    keyboard.add_line()

    keyboard.add_button('–ü–æ–ª—å–∑–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏', color=VkKeyboardColor.SECONDARY)
    keyboard.add_button('–ö—É–¥–∞ —Å–¥–∞–≤–∞—Ç—å –º—É—Å–æ—Ä?', color=VkKeyboardColor.SECONDARY)

    return keyboard.get_keyboard()


# === –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π ===
for event in longpoll.listen():
    if event.type == VkBotEventType.MESSAGE_NEW:
        user_id = event.obj.message['peer_id']
        message_text = event.obj.message['text'].lower().strip()

        print(f"–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç {user_id}: {message_text}")

        answer = faq.get(message_text, None)

        if message_text == '–ø—Ä–∏–≤–µ—Ç':
            vk.messages.send(peer_id=user_id,
                             message=faq['–ø—Ä–∏–≤–µ—Ç'],
                             keyboard=create_keyboard(),
                             random_id=0)
        elif answer:
            vk.messages.send(peer_id=user_id,
                             message=answer,
                             keyboard=create_keyboard(),
                             random_id=0)
        else:
            vk.messages.send(peer_id=user_id,
                             message="–ù–µ –ø–æ–Ω—è–ª. –ù–∞–∂–º–∏ –Ω–∞ –æ–¥–Ω—É –∏–∑ –∫–Ω–æ–ø–æ–∫.",
                             keyboard=create_keyboard(),
                             random_id=0)
